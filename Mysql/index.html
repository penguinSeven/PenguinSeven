<!doctype HTML>
<html>
<head>
<meta charset="utf-8" />
<title>penguinSeven</title>
<style>

body {
color: #333;
font-family: sans-serif;
font-size: 12pt;
line-height: 170%;
padding: 0 30px 0 270px;
}

header .banner {
margin: 0 0 1em 0;
}

header .banner, nav .banner {
color: #777;
font-size: 10pt;
font-weight: bold;
}

header h1 {
background: #0c3;
border-radius: 4px;
color: #fff;
font-size: 24pt;
margin: 0;
padding: 1.2em 0;
text-align: center;
}

nav {
font-size: 10pt;
overflow-x: hidden;
overflow-y: auto;
position: fixed;
top: 0;
left: 0;
bottom: 0;
width: 240px;
}

nav .menubar {
border-bottom: solid 1px #ccc;
display: none;
height: 48px;
line-height: 48px;
padding: 0 10px;
}

nav .button {
background: #777;
border: 1px solid #333;
color: #fff;
font-size: 10pt;
font-weight: bold;
padding: 8px;
border-radius: 4px;
}

nav ul {
padding: 0 0 0 10px;
}

nav ul a {
color: #333;
text-decoration: none;
}

nav ul a:hover {
text-decoration: underline;
}

nav li {
line-height: 180%;
list-style: none;
margin: 0;
padding: 0;
}

nav .level2 {
font-size: 11pt;
font-weight: bold;
}

nav .level3 {
padding-left: 1em;
}

nav .level3:before { 
content: "» ";
}

nav .level4 {
padding-left: 2em;
}

nav .level4:before {
content: "› ";
}

article h2 {
border-bottom: dotted 1px #777;
font-size: 12pt;
line-height: 100%;
margin: 4em 0 1em 0;
padding: 0 0 0.3em 0;
}

article h3 {
font-size: 12pt;
line-height: 100%;
margin: 2em 0 1em 0;
padding: 0;
}

article h4 {
font-size: 12pt;
font-style:italic;
font-weight: normal;
line-height: 100%;
margin: 1.2em 0 1em 0;
padding: 0;
}

article p {
margin: 1em 0;
}

article p code {
background: #eee;
border: 1px solid #ccc;
}

article p strong {
color: #f00;
}

article pre {
background: #eee;
border-left: solid 2px #3c0;
font-size: 10pt;
margin: 1em 0;
padding: 0 0 0 1em;
overflow-x: auto;
overflow-y: padding;
}

article blockquote {
background: #fff;
border: dashed 1px #777;
border-left: solid 2px #777;
color: #000;
margin: 0;
padding: 0 0 0 1em;
}

article ul, article ol {
padding-left: 2em;
}

footer {
border-top: 1px solid #ccc;
font-size: 10pt;
margin-top: 4em;
}

@media (max-width: 768px) {

body {
padding: 0 10px 0 230px;
}

nav {
width: 230px;
}

}

@media (max-width: 480px) {

body {
padding: 64px 10px 0 10px;
}

header .banner {
display: none;
}

nav {
position: absolute;
width: 100%;
}

nav .menubar {
display: block;
}

nav .banner {
float: right;
}

nav ul {
background: #fff;
display: none;
font-size: 14pt;
margin: 0;
padding: 0 0 0 8px;
}

nav .level2 {
font-size: 16pt;
font-weight: bold;
}

nav li {
line-height: 240%;
}

.index nav ul {
display: block;
}

.index article {
display: none;
}

}
table {
   border-collapse: collapse;
   border-spacing: 0;
   margin: 1.5em 0;
}
table th,table td {
 border: 1px solid #E6E6E6;
 padding: 5px 8px;
 word-break: normal;

}
</style>
</head>
<body>
<nav>
    <ul>
<li class="level2"><a href="#1">Mysql 数据库</a></li><li class="level3"><a href="#1.1">常见问题</a></li><li class="level4"><a href="#1.1.1">1. 修改权限</a></li><li class="level4"><a href="#1.1.2">2. 结束符定义</a></li><li class="level4"><a href="#1.1.3">3. ORDER BY 自定义规则</a></li><li class="level4"><a href="#1.1.4">4.查询字段和注释</a></li><li class="level4"><a href="#1.1.5">5.查询表结构</a></li><li class="level4"><a href="#1.1.6">6.时间转换</a></li></ul>

</nav>
<article>
    <ul>
<li><a href='./conf/index.html'>conf</a></li>
</ul>

    <h2 id="1">Mysql 数据库</h2>
<h3 id="1.1">常见问题</h3>
<h4 id="1.1.1">1. 修改权限</h4>
<pre><code class="lang-mysql">-- 赋予任何主机访问数据的权限
GRANT ALL RIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; WITH GRANT OPTION</code></pre>
<h4 id="1.1.2">2. 结束符定义</h4>
<ul>
<li>总所周知，mysql的命令行执行每一条命令是以分号结尾的，也就是说识别是否为一条命令，是根据分号决定的。
然而存储过程中设计多条语句，很可能出现多个分号，所以直接把存储过程复制到命令号一般都会失败</li>
</ul>
<ul>
<li>解决方法是需要加一个分隔符，让命令行知道整个存储过程的代码是完整的一块代码,代码如下</li>
</ul>
<pre><code class="lang-mysql">DELIMITER //     
CREATE PROCEDURE p_name (IN b INTEGER(12))     
begin     
 declare a INTEGER(12);     
 set a=12;     
 INSERT INTO t VALUES (a);     
 SELECT s1* a FROM t;     
End     
//</code></pre>
<ul>
<li>如代码中所示，在存储过程的开头加上“DELIMITER //”,结尾加上“//”就ok了</li>
</ul>
<ul>
<li>执行后续的sql ，需将结束符重新定义</li>
</ul>
<pre><code class="lang-mysql">DELIMITER ;</code></pre>
<h4 id="1.1.3">3. ORDER BY 自定义规则</h4>
<blockquote>
<p>问题描述:<br>大家都知道, MySQL 中按某字段升序排列的 SQL 为 (以 id 为例, 下同):</p>
</blockquote>
<pre><code class="lang-mysql">
SELECT * FROM `MyTable` 
WHERE `id` IN (1, 7, 3, 5) 
ORDER BY `id` ASC</code></pre>
<p>降序排列的 SQL 为:</p>
<pre><code class="lang-mysql">SELECT * FROM `MyTable` 
WHERE `id` IN (1, 7, 3, 5) 
ORDER BY `id` DESC</code></pre>
<p>有时以上排序并不能满足我们的需求. 例如, 我们想要按 id 以 5, 3, 7, 1 的顺序排列, 该如何实现. 这也是很多国内外同行经常遇到的问题之一.</p>
<p>下面我们给出按表中某字段, 以我们想要的列表方式排序的解决方案.
解决方案用&quot;按字段排序&quot; (ORDER BY FIELD).语法:</p>
<pre><code class="lang-mysql">  SELECT * FROM MyTable 
  ORDER BY FIELD(`id`, 5, 3, 7, 1)</code></pre>
<p>要注意的是, FIELD 后面是没有空格的.
因此, 完整的 SQL 为:</p>
<pre><code class="lang-mysql">SELECT * FROM `MyTable` 
WHERE `id` IN (1, 7, 3, 5) 
ORDER BY FIELD(`id`, 5, 3, 7, 1)</code></pre>
<p>常见应用:</p>
<pre><code class="lang-mysql">SELECT * FROM `MyTable` 
WHERE `name` IN (&#39;张三&#39;, &#39;李四&#39;, &#39;王五&#39;, &#39;孙六&#39;) 
ORDER BY FIELD(`name`, &#39;李四&#39;, &#39;孙六&#39;, &#39;张三&#39;, &#39;王五&#39;)</code></pre>
<h4 id="1.1.4">4.查询字段和注释</h4>
<pre><code class="lang-mysql">  select COLUMN_NAME,column_comment 
  from INFORMATION_SCHEMA.Columns 
  where table_name=&#39;表名&#39; and table_schema=&#39;数据库&#39;</code></pre>
<h4 id="1.1.5">5.查询表结构</h4>
<pre><code class="lang-mysql">
SELECT a.table_name,b.TABLE_COMMENT,a.COLUMN_NAME,a.COLUMN_TYPE,a.COLUMN_COMMENT 
FROM information_schema.COLUMNS a 
JOIN information_schema.TABLES b ON a.table_schema = b.table_schema AND a.table_name = b.table_name
WHERE a.table_name = &#39;question&#39;;</code></pre>
<h4 id="1.1.6">6.时间转换</h4>
<pre><code class="lang-mysql">
UNIX_TIMESTAMP(&#39;2017-04-21 08:30:00&#39;) - FLOOR(RAND()*100*3600*24);

date_format();</code></pre>

</article>
<footer>

</footer>
