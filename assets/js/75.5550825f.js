(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{407:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php"}},[t._v("#")]),t._v(" PHP")]),t._v(" "),s("h2",{attrs:{id:"函数解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数解析"}},[t._v("#")]),t._v(" 函数解析")]),t._v(" "),s("h3",{attrs:{id:"shell-exec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shell-exec"}},[t._v("#")]),t._v(" "),s("strong",[t._v("shell_exec()")])]),t._v(" "),s("h3",{attrs:{id:"passthru"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#passthru"}},[t._v("#")]),t._v(" "),s("strong",[t._v("passthru()")])]),t._v(" "),s("h3",{attrs:{id:"exec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exec"}},[t._v("#")]),t._v(" "),s("strong",[t._v("exec()")])]),t._v(" "),s("h3",{attrs:{id:"system"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#system"}},[t._v("#")]),t._v(" "),s("strong",[t._v("system()")])]),t._v(" "),s("h3",{attrs:{id:"escapeshellcmd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#escapeshellcmd"}},[t._v("#")]),t._v(" "),s("strong",[t._v("escapeshellcmd()")])]),t._v(" "),s("h3",{attrs:{id:"escapeshellarg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#escapeshellarg"}},[t._v("#")]),t._v(" "),s("strong",[t._v("escapeshellarg()")])]),t._v(" "),s("h2",{attrs:{id:"开源项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开源项目"}},[t._v("#")]),t._v(" 开源项目")]),t._v(" "),s("h3",{attrs:{id:"getid3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getid3"}},[t._v("#")]),t._v(" getID3()")]),t._v(" "),s("p",[t._v("getID3()这个PHP脚本能够从MP3或其它媒体文件"),s("br"),t._v("\n(格式包括：Ogg，WMA，WMV，ASF，WAV，AVI，AAC，VQF，\nFLAC，MusePack，Real，QuickTime，Monkey's Audio，MIDI等)\n中提取有用的信息如：ID3标签,bitrate,播放时间等。")]),t._v(" "),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("h3",{attrs:{id:"escapeshellarg-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#escapeshellarg-函数"}},[t._v("#")]),t._v(" escapeshellarg 函数")]),t._v(" "),s("p",[t._v("(PHP 4 >= 4.0.3, PHP 5, PHP 7)")]),t._v(" "),s("p",[t._v("escapeshellarg — 把字符串转码为可以在 shell 命令里使用的参数")]),t._v(" "),s("p",[t._v("When escapeshellarg() was stripping my non-ASCII characters from a UTF-8 string, adding the following fixed the problem:")]),t._v(" "),s("p",[t._v("ex:")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("system")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'ls '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("escapeshellarg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])])]),s("p",[t._v("fixed :")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setlocale")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LC_CTYPE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"en_US.UTF-8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("system")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'ls '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("escapeshellarg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])])]),s("h3",{attrs:{id:"php-cli-模式-判断文件是否存在错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php-cli-模式-判断文件是否存在错误"}},[t._v("#")]),t._v(" php-cli 模式，判断文件是否存在错误")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearstatcache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("p",[t._v("clearstatcache() 函数会缓存某些函数的返回信息，\n以便提供更高的性能。但是有时候，比如在一个脚本中多次检查同一个文件，\n而该文件在此脚本执行期间有被删除或修改的危险时，你需要清除文件状态缓存，\n以便获得正确的结果。要做到这一点，就需要使用 clearstatcache() 函数。\n会进行缓存的函数，即受 clearstatcache() 函数影响的函数：")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lstat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file_exists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_writable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_readable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_executable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filectime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileatime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filemtime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileinode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filegroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileowner")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filesize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filetype")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileperms")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("p",[t._v("example :")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//检查文件大小")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filesize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"test.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$file")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fopen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"test.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"a+"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 截取文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ftruncate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fclose")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//清除缓存并再次检查文件大小")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearstatcache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filesize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"test.txt"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])])]),s("h3",{attrs:{id:"php并行-多进程-多线程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php并行-多进程-多线程"}},[t._v("#")]),t._v(" PHP并行 多进程/多线程")]),t._v(" "),s("p",[t._v("PHP中提供了一个扩展pcntl，可以利用操作系统的fork调用来实现多进程。\nfork调用后执行的代码将是并行的。")]),t._v(" "),s("p",[t._v("注：pcntl仅支持linux平台，并且只能在cli模式下使用。")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pid")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pcntl_fork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pid")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//父进程代码")]),t._v("\n                \n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elseif")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pid")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//子进程代码")]),t._v("\n                \n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])])]),s("ol",{attrs:{start:"0"}},[s("li",[s("p",[t._v("此扩展仅在线程安全版本中可用,多线程扩展"),s("a",{attrs:{href:"http://pecl.php.net/package/pthreads",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://pecl.php.net/package/pthreads"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("多进程和多线程其实是作用是相同的。区别是")]),t._v(" "),s("ul",[s("li",[t._v("线程是在同一个进程内的，可以共享内存变量实现线程间通信")]),t._v(" "),s("li",[t._v("线程比进程更轻量级，开很大量进程会比线程消耗更多系统资源")]),t._v(" "),s("li",[t._v("多线程也存在一些问题：")])])]),t._v(" "),s("li",[s("p",[t._v("线程读写变量存在同步问题，需要加锁")]),t._v(" "),s("ul",[s("li",[t._v("锁的粒度过大会有性能问题，可能会导致只有1个线程在运行，其他线程都在等待锁。这样就不是并行了")]),t._v(" "),s("li",[t._v("同时使用多个锁，逻辑复杂，一旦某个锁没被正确释放，可能会发生线程死锁")]),t._v(" "),s("li",[t._v("某个线程发生致命错误会导致整个进程崩溃")])])]),t._v(" "),s("li",[s("p",[t._v("多进程方式更加稳定，另外利用进程间通信（IPC）也可以实现数据共享。")]),t._v(" "),s("ul",[s("li",[t._v("共享内存，这种方式和线程间读写变量是一样的，需要加锁，会有同步、死锁问题。")]),t._v(" "),s("li",[t._v("消息队列，可以采用多个子进程抢队列模式，性能很好")]),t._v(" "),s("li",[t._v("PIPE，UnixSock，TCP，UDP。可以使用read/write来传递数据，TCP/UDP方式使用socket来通信，子进程可以分布运行")])])])]),t._v(" "),s("h3",{attrs:{id:"composer-安装配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#composer-安装配置"}},[t._v("#")]),t._v(" composer 安装配置")]),t._v(" "),s("ul",[s("li",[t._v("第一种")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sS")]),t._v(" https://getcomposer.org/installer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" php\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 放入全局")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" composer.phar /usr/local/bin/composer\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改源")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" repo.packagist "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" https://packagist.phpcomposer.com\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置自动更新")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" selfupdate\n")])])]),s("ul",[s("li",[t._v("第二种")])]),t._v(" "),s("div",{staticClass:"language-shell script extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("php "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"copy('https://getcomposer.org/installer', 'composer-setup.php');\"")]),t._v("\nphp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"if (hash_file('sha384', 'composer-setup.php') === 'a5c698ffe4b8e849a443b120cd5ba38043260d5c4023dbf93e1558871f1f07f58274fc6f4c93bcfd858c6bd0775cd8d1') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\"")]),t._v("\nphp composer-setup.php\nphp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"unlink('composer-setup.php');\"")]),t._v("\n")])])]),s("div",{staticClass:"language-shell script extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" composer.phar /usr/local/bin/composer\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/composer\n")])])]),s("div",{staticClass:"language-shell script extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" repo.packagist "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" https://mirrors.aliyun.com/composer/\n")])])]),s("h4",{attrs:{id:"phpunit-单元测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#phpunit-单元测试"}},[t._v("#")]),t._v(" phpunit 单元测试")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" global require phpunit/phpunit\n")])])]),s("p",[t._v("全局安装PHPUnit。"),s("br"),t._v("\n然后在"),s("code",[t._v("~/.bashrc")]),t._v("文件末尾加一行"),s("code",[t._v("PATH=$PATH:/home/feng/.composer/vendor/bin")]),t._v("  （注意替换用户名），来将"),s("code",[t._v("Composer")]),t._v("的"),s("code",[t._v("global bin")]),t._v("目录加入"),s("code",[t._v("PATH")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"webbench-性能测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webbench-性能测试"}},[t._v("#")]),t._v(" webBench 性能测试")]),t._v(" "),s("ul",[s("li",[t._v("安装")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://home.tiscali.cz/~cz210552/distfiles/webbench-1.5.tar.gz\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" zxvf webbench-1.5.tar.gz\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" webbench-1.5\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("ul",[s("li",[t._v("使用：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# webbench -c 并发数 -t 运行测试时间 URL")]),t._v("\n$ webbench "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" http://192.168.80.157/phpinfo.php\n")])])]),s("h3",{attrs:{id:"xdebug-下载安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xdebug-下载安装"}},[t._v("#")]),t._v(" xdebug 下载安装")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://xdebug.org/download.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1),t._v(" ( 注意NTS | TS)")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-zxvf")]),t._v(" xx.tgz\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" xx\n$ phpize\n$ ./configure\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("p",[t._v("修改配置文件：")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("xdebug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zend_extension")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("xdebug.so")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xdebug.remote_enable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xdebug.remote_connect_back")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xdebug.remote_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("9000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xdebug.max_nesting_level")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("512")]),t._v("\n")])])]),s("h3",{attrs:{id:"phpstorm-vagrant-xdebug-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#phpstorm-vagrant-xdebug-配置"}},[t._v("#")]),t._v(" phpstorm + vagrant + xdebug 配置")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("php  》 severs 》 目录映射")])]),t._v(" "),s("li",[s("p",[t._v("run/debug configuration 》 PHP WEB Application 》")])]),t._v(" "),s("li",[s("p",[t._v("重启php-fpm，必须重启")])])]),t._v(" "),s("h3",{attrs:{id:"api-设计理念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-设计理念"}},[t._v("#")]),t._v(" API 设计理念")]),t._v(" "),s("p",[t._v("将涉及的实体抽象成资源，即按 id 访问资源，在 url 上做文章，以后再也不用为 url 起名字而苦恼了；"),s("br"),t._v("\n使用 HTTP 动词对资源进行 CRUD（增删改查）：get -> 查, post -> 增, put -> 改, delete -> 删"),s("br"),t._v("\nURL 命名规则，对于资源无法使用一个单数名词表示的情况，我使用中横线 - 连接")]),t._v(" "),s("ul",[s("li",[t._v("资源采用名词命名，e.g：产品 -> product")]),t._v(" "),s("li",[t._v("新增资源，e.g：新增产品 url -> /product, verb -> POST")]),t._v(" "),s("li",[t._v("修改资源，e.g：修改产品 url -> /products/{id}, verb -> PUT")]),t._v(" "),s("li",[t._v("资源详情，e.g：指定产品详情 url -> /products/{id}, verb -> GET")]),t._v(" "),s("li",[t._v("删除资源，e.g：删除产品 url -> /products/{id}, verb -> DELETE")]),t._v(" "),s("li",[t._v("资源列表，e.g：产品列表 url -> /products, verb -> GET")]),t._v(" "),s("li",[t._v("资源关联关系，e.g：收藏产品 url -> /products/{id}/star, verb -> PUT")]),t._v(" "),s("li",[t._v("资源关联关系，e.g：删除收藏产品 url -> /products/{id}/star, verb -> DELETE")])]),t._v(" "),s("h3",{attrs:{id:"composer-http-提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#composer-http-提示"}},[t._v("#")]),t._v(" composer http 提示：")]),t._v(" "),s("div",{staticClass:"language-textmate extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" Your configuration does not allow connection to http://packagist.phpcomposer.com. See https://getcomposer.org/doc/06-config.md#secure-http for details  \n")])])]),s("p",[t._v("网上查一下，说是因为镜像使用用的是http，而原地址是需要https，所以配置下关掉https就好了。")]),t._v(" "),s("ul",[s("li",[t._v("修改composer.json文件")])]),t._v(" "),s("p",[t._v("view plain copy")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"secure-http"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("  \n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),s("ul",[s("li",[t._v("参数")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("composer")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" secure-http "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])])]),s("h3",{attrs:{id:"手动安装扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动安装扩展"}},[t._v("#")]),t._v(" 手动安装扩展")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /root/oneinstack/src\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" zxvf php-7.4.5.tar.gz  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压已经安装的php版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" php-7.4.5/ext/fileinfo\n/usr/local/php/bin/phpize\n./configure --with-php-config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/php/bin/php-config\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/php/lib/php/extensions\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#看到no-debug-non-zts-20131226类似文件夹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" no-debug-non-zts-20131226\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看有没有 fileinfo.so,如果有，证明编译成功")]),t._v("\n加载fileinfo\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extension=fileinfo.so'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /usr/local/php/etc/php.d/ext-fileinfo.ini\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);