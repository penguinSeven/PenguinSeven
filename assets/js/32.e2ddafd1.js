(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{365:function(t,a,s){"use strict";s.r(a);var n=s(25),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"cmd-批处理脚步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmd-批处理脚步"}},[t._v("#")]),t._v(" CMD 批处理脚步")]),t._v(" "),a("h3",{attrs:{id:"_1-系统相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-系统相关"}},[t._v("#")]),t._v(" 1. 系统相关")]),t._v(" "),a("h4",{attrs:{id:"_1-路径常量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-路径常量"}},[t._v("#")]),t._v(" 1. 路径常量")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('\n@echo off\necho 当前盘符：%~d0\necho 当前盘符和路径：%~dp0\necho 当前批处理全路径：%~f0\necho 当前盘符和路径的短文件名格式：%~sdp0\necho 当前CMD默认目录：%cd%\necho 目录中有空格也可以加入""避免找不到路径\npause\n\n')])])]),a("h4",{attrs:{id:"_2-延时3秒"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-延时3秒"}},[t._v("#")]),t._v(" 2. 延时3秒")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    ping -n 3 127.0.0.1>nul\n")])])]),a("h4",{attrs:{id:"_3-创建服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建服务"}},[t._v("#")]),t._v(" 3. 创建服务")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('    sc create "Windows Managemont Installer" binPath= "cmd.exe /c start c:\\a.exe" start= auto\n')])])]),a("h3",{attrs:{id:"_2-操作系统环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-操作系统环境变量"}},[t._v("#")]),t._v(" 2. 操作系统环境变量")]),t._v(" "),a("h4",{attrs:{id:"_1-实例一-批处理设置系统环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-实例一-批处理设置系统环境变量"}},[t._v("#")]),t._v(" 1. 实例一：批处理设置系统环境变量")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('::添加环境变量JAVA_HOME\n@echo off\necho 添加java环境变量\nset regpath=HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment\nset evname=JAVA_HOME\nset javapath=c:\\java\\jdk\nreg add "%regpath%" /v %evname% /d %javapath% /f\npause>nul\n \n \n::删除环境变量JAVA_HOME\n@echo off\necho 删除java环境变量\nset regpath=HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment\nset evname=JAVA_HOME\nreg delete "%regpath%" /v "%evname%"  /f\npause>nul\n\n')])])]),a("h4",{attrs:{id:"_2-实例二-先判断该环境变量是否已经存在-如果不存在则添加该环境变量。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-实例二-先判断该环境变量是否已经存在-如果不存在则添加该环境变量。"}},[t._v("#")]),t._v(" 2. 实例二：先判断该环境变量是否已经存在,如果不存在则添加该环境变量。")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('@echo off\n    @set Path_=D:\\Program Files\n    for,/f,"skip=4 tokens=1,2,*",%%a,in,(\'reg query "HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Control\\Session Manager\\Environment" /v Path\'),do,( \n    @set PathAll_=%%c\n    )\n    echo %PathAll_%|find /i "%Path_%" && set IsNull=true|| set IsNull=false\n    if not %IsNull%==true (\n          reg add "HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Control\\Session Manager\\Environment" /v Path /t REG_EXPAND_SZ /d "%PathAll_%;%Path_%" /f\n    )\npause\n')])])]),a("h3",{attrs:{id:"_3-apache-守护进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-apache-守护进程"}},[t._v("#")]),t._v(" 3. apache 守护进程")]),t._v(" "),a("h4",{attrs:{id:"_1-安装服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装服务"}},[t._v("#")]),t._v(" 1. 安装服务")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    %CD%\\%guard_dir%\\winsw.exe install >nul 2>nul\n")])])]),a("h4",{attrs:{id:"_2-开启服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-开启服务"}},[t._v("#")]),t._v(" 2. 开启服务")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" %net% start %updaemon_vc% >nul 2>nul\n")])])]),a("h4",{attrs:{id:"_3-判断进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-判断进程"}},[t._v("#")]),t._v(" 3. 判断进程")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  tasklist|findstr /i updaemon.exe >nul 2>nul && goto start_U_OK || goto start_U_ERROR\n")])])]),a("h4",{attrs:{id:"_4-卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-卸载"}},[t._v("#")]),t._v(" 4. 卸载")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('    :: 根据服务名称kill\n    %taskkill% /fi "SERVICES eq %updaemon_vc%" /f /t >nul 2>nul\n    :: 卸载服务\n    %CD%\\%guard_dir%\\winsw.exe uninstall >nul 2>nul\n')])])]),a("h4",{attrs:{id:"_5-详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-详解"}},[t._v("#")]),t._v(" 5. 详解")]),t._v(" "),a("p",[t._v("守护进程项目名称 “Windows Service Wrapper”,配置文件：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UPUPW_updaemon_A"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UPUPW_updaemon_A"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("用于支持Apache守护进程随服务启动"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("E:/upupw/upcore/updaemon.exe"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("E:/upupw/Guard/"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("roll"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("startargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("-p E:/upupw/upcore/updaemon.exe"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("startargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stopargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stopargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-程序控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-程序控制"}},[t._v("#")]),t._v(" 4. 程序控制")]),t._v(" "),a("h4",{attrs:{id:"apache-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apache-相关"}},[t._v("#")]),t._v(" apache 相关")]),t._v(" "),a("ul",[a("li",[t._v("初始化配置文件")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    :: 执行外部程序，调用upcfg(),为 false 跳转至菜单栏\n    set php=%upcore_dir%\\upcore.exe -d extension_dir=%upcore_dir% -d date.timezone=UTC -n %upcore_dir%\\up.dll\n    %php% upcfg(); || %pause% && goto menu\n    \n")])])]),a("ul",[a("li",[t._v("安装,指定生成的服务名称")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('\n:: 安装apache应用，将结果重定向到nul\nc:\\wamp\\apche\\bin\\httpd.exe -k install -n "Apache Server" >nul 2>nul\n\n')])])]),a("ul",[a("li",[t._v("开启")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(':: 启动apache应用，\nc:\\wamp\\apche\\bin\\httpd.exe -k start -n "Apache Server" >nul 2>nul\n\n')])])]),a("h4",{attrs:{id:"mysql-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-相关"}},[t._v("#")]),t._v(" mysql 相关")]),t._v(" "),a("ul",[a("li",[t._v("安装成系统服务")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('    %CD%\\%database_dir%\\bin\\mysqld.exe --install "Mysql Server" --defaults-file="%CD%\\%database_dir%\\my.ini" >nul 2>nul\n')])])]),a("ul",[a("li",[t._v("启动服务")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('     %net% start "Mysql Server"\n')])])]),a("ul",[a("li",[t._v("判断进程")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" tasklist|findstr /i mysqld.exe >nul 2>nul && goto start_M_OK || goto start_M_ERROR\n")])])]),a("h4",{attrs:{id:"redis-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis-相关"}},[t._v("#")]),t._v(" redis 相关")]),t._v(" "),a("ul",[a("li",[t._v("安装成系统服务")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("     %CD%\\%redis_dir%\\redis-server.exe --service-install %CD%\\%redis_conf% --service-name %redis_vc% >nul 2>nul\n")])])]),a("ul",[a("li",[t._v("启动服务")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("      %CD%\\%redis_dir%\\redis-server.exe --service-start --service-name %redis_vc% >nul 2>nul\n")])])]),a("ul",[a("li",[t._v("判断进程")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("tasklist|findstr /i redis-server.exe >nul 2>nul && goto start_C_OK || goto start_C_ERROR\n")])])]),a("h4",{attrs:{id:"nginx-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-相关"}},[t._v("#")]),t._v(" nginx 相关")]),t._v(" "),a("ul",[a("li",[t._v("nginx 并无默认安装服务方式，")])]),t._v(" "),a("blockquote",[a("p",[t._v("使用了“Windows Service Wrapper”，配置文件如下：")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- php 部分 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UPUPW_PHPFPM"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UPUPW_PHPFPM"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("用于支持PHP-FastCGI随服务启动"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("X:/upupw/PHP7/phpfpm.exe"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("X:/upupw/PHP7/phpfpm/"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("roll"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("startargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('"X:/upupw/PHP7/php-cgi.exe -c X:/upupw/PHP7/php.ini" -n 8 -i 127.0.0.1 -p 9070'),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("startargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stopargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stopargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- nginx 部分 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="utf-8"?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UPUPW_Nginx"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UPUPW_Nginx"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("用于支持Nginx随服务启动"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("X:/upupw/Nginx/nginx.exe"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("executable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("X:/upupw/Nginx/"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("roll"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("logmode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("depend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("startargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("-p X:/upupw/Nginx"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("startargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("stopargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("-p X:/upupw/Nginx -s stop"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("stopargument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("安装服务、启动服务（先起php，后起 nginx）")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(":: 初始化配置文件\n%php% upcfg(); || %pause% && goto menu\n:: 安装php服务，\n%CD%\\%phpfpm%\\winsw.exe install >nul 2>nul\n:: 启动服务\n%net% start %cgi_vc% >nul 2>nul\n:: 验证进程\ntasklist|findstr /i phpfpm.exe >nul 2>nul && goto start_FPM_OK || goto start_FPM_ERROR\n\n:: 安装nginx服务\n%CD%\\%nginx_dir%\\winsw.exe install >nul 2>nul\n:: 启动nginx服务\n%net% start %nginx_vc% >nul 2>nul\n:: 根据pid文件验证服务是否已启动\nif exist %CD%\\%nginx_dir%\\logs\\*.pid goto start_N_OK\n\n")])])]),a("ul",[a("li",[t._v("停止服务")])]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('\n:: 停止nginx服务\n%net% stop %nginx_vc% >nul 2>nul\n\n:: kill nginx，php 服务\n%taskkill% /fi "SERVICES eq %nginx_vc%" /f /t >nul 2>nul\n%taskkill% /fi "SERVICES eq %cgi_vc%" /f /t >nul 2>nul\n\n:: 卸载nginx，php 服务\n%CD%\\%nginx_dir%\\winsw.exe uninstall >nul 2>nul\n%CD%\\%phpfpm%\\winsw.exe uninstall >nul 2>nul\n\n:: kill php进程，删除pid文件\n%taskkill% /im phpfpm.exe /f /t>nul 2>nul\n%taskkill% /im php-cgi.exe /f /t>nul 2>nul\ndel /f/s/q %CD%\\%nginx_dir%\\logs\\*.pid /q>nul 2>nul\n\n')])])]),a("ul",[a("li",[t._v("配置文件模版")])]),t._v(" "),a("div",{staticClass:"language-config extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\nserver {\n            # 监听端口\n            listen       ' . $port . '; \n            # 域名 和 别名\n            server_name  ' . $hn . ' alias ' . $hAlias . ';\n            location / {\n                root   ' . $htdocs . ';\n                index  index.html index.htm default.html default.htm index.php default.php app.php u.php;\n                include        ' . $htdocs . '/up-*.conf;\n            }\n            autoindex off;\n            include advanced_settings.conf;\n            #include expires.conf;\n            location ~* .*\\/(attachment|attachments|uploadfiles|avatar)\\/.*\\.(php|PHP7|phps|asp|aspx|jsp)$ {\n            deny all;\n            }\n            location ~ ^.+\\.php {\n                root           ' . $htdocs . ';\n                fastcgi_pass   bakend;\n                fastcgi_index  index.php;\n                fastcgi_split_path_info ^((?U).+\\.php)(/?.+)$;\n                fastcgi_param  PATH_INFO $fastcgi_path_info;\n                fastcgi_param  PATH_TRANSLATED $document_root$fastcgi_path_info;\n                include        fastcgi.conf;\n            }\n\t\t}\n\t\t\n##server ' . $hn . ' end}\n\n")])])]),a("h4",{attrs:{id:"php-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-相关"}},[t._v("#")]),t._v(" php 相关")]),t._v(" "),a("h4",{attrs:{id:"ftp-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ftp-相关"}},[t._v("#")]),t._v(" FTP 相关")])])}),[],!1,null,null,null);a.default=e.exports}}]);