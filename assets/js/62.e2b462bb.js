(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{398:function(s,a,t){"use strict";t.r(a);var e=t(25),l=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"sentry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sentry"}},[s._v("#")]),s._v(" Sentry")]),s._v(" "),a("h3",{attrs:{id:"python-安装依赖环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python-安装依赖环境"}},[s._v("#")]),s._v(" Python 安装依赖环境")]),s._v(" "),a("ul",[a("li",[s._v("安装pip")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  python-setuptools, python-dev, build-essential, python-pip\n")])])]),a("ul",[a("li",[s._v("安装 "),a("code",[s._v("virtualenv")])])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenv\n")])])]),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenv\n")])])]),a("ul",[a("li",[s._v("创建虚拟环境")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ virtualenv xxx\n")])])]),a("p",[s._v("进入虚拟环境")]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入激活")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" xxx\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" bin/activate\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出")]),s._v("\n$ deactivate\n")])])]),a("ul",[a("li",[s._v("安装 "),a("code",[s._v("virtualenvwrapper")]),s._v(" 【管理虚拟环境】")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenvwrapper\n")])])]),a("p",[s._v("安装完成后，建立个虚拟环境安装存储的目录，\n建议是 "),a("code",[s._v("$HOME/.virtualenv")]),s._v(" 目录，\n配置下 "),a("code",[s._v(".bashrc")]),s._v(" 文件，文件末尾添加：")]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WORKON_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.virtualenvs\n "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /usr/local/bin/virtualenvwrapper.sh\n")])])]),a("p",[s._v("source .bashrc后，运行 "),a("code",[s._v("mkvirtualenv xxx")]),s._v(" 即可建立虚拟环境。\n退出运行 "),a("code",[s._v("deactivate")]),s._v("。这样，\n就不需要再进入到虚拟环境目录运行 "),a("code",[s._v("source xxx/activate")]),s._v("，\n直接在终端输入 "),a("code",[s._v("workon xxx")]),s._v(" 即可。")]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入激活")]),s._v("\n$ workon xxx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出")]),s._v("\n$ deactivate\n")])])]),a("ul",[a("li",[s._v("安装 "),a("code",[s._v("Sentry")])])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 装环境")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python-setuptools python-pip python-dev libxslt1-dev libxml2-dev libz-dev libffi-dev libssl-dev libpq-dev libyaml-dev\n")])])]),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sentry\n")])])]),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/yuki-nana/p/10898774.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("镜像参考"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用国内镜像")]),s._v("\npip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-U")]),s._v(" sentry "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" http://mirrors.aliyun.com/pypi/simple/\n")])])]),a("ul",[a("li",[s._v("报错信息")])]),s._v(" "),a("p",[a("code",[s._v("c/_cffi_backend.c:2:20: fatal error: Python.h: No such file or directory")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python-dev\n")])])]),a("p",[a("code",[s._v("c/_cffi_backend.c:15:17: fatal error: ffi.h: No such file or directory")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libffi-dev\n")])])]),a("p",[a("code",[s._v("RuntimeError: cryptography requires setuptools 18.5 or newer, please upgrade to a newer version of setuptools")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# setuptool 太老了，更新下: ")]),s._v("\n$ pip "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--upgrade")]),s._v(" setuptools\n")])])]),a("ul",[a("li",[s._v("配置 "),a("code",[s._v("Sentry")])])]),s._v(" "),a("h3",{attrs:{id:"docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_33551792/article/details/104243528",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("从github上拉取源码")])])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/getsentry/onpremise.git\n")])])]),a("blockquote",[a("p",[s._v("注意你需要保证你的Docker 17.05.0+ Compose 1.19.0+\n同时还需要拥有least 2400MB RAM")])]),s._v(" "),a("ul",[a("li",[s._v("开始构建镜像")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--pull")]),s._v("\n")])])]),a("p",[s._v("但是出了个问题,问题描述说是仓库不存在或可能需要“docker登录”:拒绝:请求访问的资源被拒绝")]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("\n")])])]),a("p",[s._v("尝试解决问题：先执行登录操作")]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login\n")])])]),a("h3",{attrs:{id:"配置docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置docker镜像"}},[s._v("#")]),s._v(" 配置Docker镜像")]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sSL")]),s._v(" https://get.daocloud.io/daotools/set_mirror.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" http://f1361db2.m.daocloud.io\n")])])])])}),[],!1,null,null,null);a.default=l.exports}}]);