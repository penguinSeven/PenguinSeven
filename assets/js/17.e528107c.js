(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{337:function(t,a,s){t.exports=s.p+"assets/img/phpunit-01.a0c1a4dc.png"},338:function(t,a,s){t.exports=s.p+"assets/img/phpunit-02.6a5521e4.png"},339:function(t,a,s){t.exports=s.p+"assets/img/phpunit-03.e3152dda.png"},340:function(t,a,s){t.exports=s.p+"assets/img/phpunit-05.893d7c7e.png"},341:function(t,a,s){t.exports=s.p+"assets/img/phpunit-04.ba28eb48.png"},424:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"phpunit-单元测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#phpunit-单元测试"}},[t._v("#")]),t._v(" Phpunit 单元测试")]),t._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("在多次尝试多次失败，再尝试的情况下，跑通了一个测试demo，参考了一些文章")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("http://bayescafe.com/php/getting-started-with-phpunit.html")])]),t._v(" "),a("li",[a("p",[t._v("http://www.yii-china.com/post/detail/460.html")])])]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("巨坑的安装之路，访问phpunit中文网"),a("strong",[t._v("http://www.phpunit.cn/")]),t._v("，目前提供三个版本\n都有对应支持的PHP版本，一定要对号下载。")]),t._v(" "),a("p",[a("img",{attrs:{src:s(337),alt:"介绍"}})]),t._v(" "),a("p",[t._v("然后事情并没有这么简单，所有的下载连接都是"),a("strong",[t._v("404")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(338),alt:"404"}})]),t._v(" "),a("p",[t._v("机智的我找到了官网，查看"),a("strong",[t._v("https://phpunit.de/")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("➜ wget https://phar.phpunit.de/phpunit.phar\n\n➜ chmod +x phpunit.phar\n\n➜ sudo mv phpunit.phar /usr/local/bin/phpunit\n\n➜ phpunit --version\nPHPUnit 6.5.0 by Sebastian Bergmann and contributors.\n")])])]),a("p",[t._v("下载的版本是最新版本，根据下载的地址，找到了所有的历史版本，"),a("strong",[t._v("https://phar.phpunit.de/")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(339),alt:"list"}}),t._v(" "),a("img",{attrs:{src:s(340),alt:"list"}})]),t._v(" "),a("p",[t._v("由于我使用的是"),a("strong",[t._v("PHP 5.6.32 (cli) (built: Nov 28 2017 17:52:20)")]),t._v("，我下载了对应的版本")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" # 下载\n ➜ wget https://phar.phpunit.de/phpunit-5.6.2.phar\n # 加权限\n ➜ chmod +x phpunit-5.6.3.phar\n # 移目录\n ➜ mv phpunit-5.6.3.phar /usr/local/bin/phpunit\n # 查看版本\n ➜ phpuint --version\n")])])]),a("h2",{attrs:{id:"测试项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试项目"}},[t._v("#")]),t._v(" 测试项目")]),t._v(" "),a("h3",{attrs:{id:"laravel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#laravel"}},[t._v("#")]),t._v(" laravel")]),t._v(" "),a("ul",[a("li",[t._v("安装laravel 5.1")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('➜ composer create-project laravel/laravel your-project-name --prefer-dist "5.1.*"\n')])])]),a("ul",[a("li",[t._v("执行测试demo")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("➜ phpunit tests\n")])])]),a("p",[a("img",{attrs:{src:s(341),alt:"demo"}})]),t._v(" "),a("h4",{attrs:{id:"简单介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单介绍"}},[t._v("#")]),t._v(" 简单介绍")]),t._v(" "),a("ul",[a("li",[t._v("Laravel默认两个文件夹 Feature and Unit")]),t._v(" "),a("li",[t._v("Unit tests里面文件中的测试主要用来测试比较小，功能相对独立，通常是一个函数")]),t._v(" "),a("li",[t._v("Feature tests 用来测试比较大的，通常是测试一个完成的HTTP请求，返回一个JSON")])]),t._v(" "),a("h4",{attrs:{id:"使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[t._v("#")]),t._v(" 使用方法")]),t._v(" "),a("ul",[a("li",[t._v("Laravel提供了命令行操作")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ php artisan make:test UserTest                //创建Feature测试\n \n$ php artisan make:test UserTest --unit         //创建unit测试\n")])])]),a("ul",[a("li",[t._v("然后phpstorm快捷键 "),a("code",[t._v("shift + Ctrl + F10")])])]),t._v(" "),a("h4",{attrs:{id:"测试demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试demo"}},[t._v("#")]),t._v(" 测试Demo")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Tests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Feature")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Tests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TestCase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Foundation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Testing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("RefreshDatabase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Foundation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Testing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("WithoutMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("ExampleTest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestCase")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * A basic test example.\n     *\n     * @return void\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("testBasicTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),a("h3",{attrs:{id:"yii"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yii"}},[t._v("#")]),t._v(" yii")]),t._v(" "),a("h3",{attrs:{id:"安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("ul",[a("li",[t._v("源码安装")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("➜ wget https://github.com/yiisoft/yii2/releases/download/2.0.12/yii-basic-app-2.0.12.tgz\n\n➜ tar -zxvf yii-basic-app-2.0.12.tgz\n")])])]),a("ul",[a("li",[a("code",[t._v("composer")]),t._v(" 安装")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("➜ composer create-project --prefer-dist yiisoft/yii2-app-basic basic\n")])])]),a("h3",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),a("ul",[a("li",[t._v("nginx 文件指向 "),a("strong",[t._v("basic/web/")]),t._v(" 目录, rewrite规则")])]),t._v(" "),a("div",{staticClass:"language-nginxconfig extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("location / {\n        # Redirect everything that isn't a real file to index.php\n        try_files $uri $uri/ /index.php$is_args$args;\n    }\n")])])]),a("h3",{attrs:{id:"执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行"}},[t._v("#")]),t._v(" 执行")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ vendor/bin/codecept run\n")])])]),a("h3",{attrs:{id:"为指定模型创建测试用例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为指定模型创建测试用例"}},[t._v("#")]),t._v(" 为指定模型创建测试用例")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ vendor/bin/codecept generate:test unit models/Subject\n")])])]),a("blockquote",[a("p",[t._v("生成 "),a("code",[t._v("tests/unit/models/SubjectTest.php")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);