(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{408:function(n,s,e){"use strict";e.r(s);var t=e(25),a=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[n._v("#")]),n._v(" 配置")]),n._v(" "),s("h3",{attrs:{id:"通用配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通用配置"}},[n._v("#")]),n._v(" 通用配置")]),n._v(" "),s("ul",[s("li",[s("code",[n._v("https")]),n._v(" 基础配置， 强制跳转至 "),s("code",[n._v("https")])])]),n._v(" "),s("div",{staticClass:"language-nginxconfig extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('server {\n  listen 80;\n  server_name crm.shikek.net;\n  access_log /data/wwwlogs/crm.shikek.net_nginx.log combined;\n  index index.html index.htm index.php;\n  root /data/wwwroot/72crm;\n  \n  listen 443 ssl;\n  ssl on;\n  ssl_certificate  /usr/local/nginx/conf/ssl/2911636_crm.shikek.net.pem;\n  ssl_certificate_key  /usr/local/nginx/conf/ssl/2911636_crm.shikek.net.key;\n  ssl_session_timeout 5m;\n  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_prefer_server_ciphers on; \n  \n  if ($ssl_protocol = "") { return 301 https://$host$request_uri; }\n \n  include /usr/local/nginx/conf/rewrite/thinkphp.conf;\n  #error_page 404 /404.html;\n  #error_page 502 /502.html;\n  \n  location ~ [^/]\\.php(/|$) {\n    try_files $uri =404;\n    #fastcgi_pass remote_php_ip:9000;\n    fastcgi_pass unix:/dev/shm/php-cgi.sock;\n    fastcgi_index index.php;\n    include fastcgi.conf;\n    set $real_script_name $fastcgi_script_name;\n    if ($fastcgi_script_name ~ "^(.+?\\.php)(/.+)$") {\n      set $real_script_name $1;\n      set $path_info $2;\n    }\n    fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;\n    fastcgi_param SCRIPT_NAME $real_script_name;\n    fastcgi_param PATH_INFO $path_info;\n  }\n\n  location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf|flv|mp4|ico)$ {\n    expires 30d;\n    access_log off;\n  }\n  location ~ .*\\.(js|css)?$ {\n    expires 7d;\n    access_log off;\n  }\n  location ~ /\\.ht {\n    deny all;\n  }\n}\n\n')])])])])}),[],!1,null,null,null);s.default=a.exports}}]);